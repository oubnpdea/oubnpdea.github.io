<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mongodb on 345345345 Blog</title>
    <link>http://oubnpdea.github.io/tags/mongodb/</link>
    <description>Recent content in Mongodb on 345345345 Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <managingEditor>345345345345@163.com (345345 345345345)</managingEditor>
    <webMaster>345345345345@163.com (345345 345345345)</webMaster>
    <lastBuildDate>Thu, 03 Mar 2016 07:00:00 +0800</lastBuildDate>
    <atom:link href="http://oubnpdea.github.io/tags/mongodb/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>MongoDB å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
      <link>http://oubnpdea.github.io/2016/03/mongodb-3/</link>
      <pubDate>Thu, 03 Mar 2016 07:00:00 +0800</pubDate>
      <author>345345345345@163.com (345345 345345345)</author>
      <guid>http://oubnpdea.github.io/2016/03/mongodb-3/</guid>
      <description>

&lt;h2 id=&#34;php-ç¯‡:329d44cf14e5929d78d602751fb22339&#34;&gt;PHP ç¯‡&lt;/h2&gt;

&lt;h4 id=&#34;å®‰è£…-mongodb-çš„-php-é©±åŠ¨æ‰©å±•:329d44cf14e5929d78d602751fb22339&#34;&gt;å®‰è£… MongoDB çš„ PHP é©±åŠ¨æ‰©å±•&lt;/h4&gt;

&lt;p&gt;PHP å…³äº MongoDB çš„æ‰©å±•æ‹¥æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ php-mongodb åŠ php-mongo å…¶ä¸­åˆ†åˆ«æ”¯æŒçš„æƒ…å†µå¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xp22y.com1.z0.glb.clouddn.com/mongodb-2-1.jpg&#34; alt=&#34;php-mongodb åŠ php-mongo æ”¯æŒæƒ…å†µ&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xp22y.com1.z0.glb.clouddn.com/mongodb-2-2.jpg&#34; alt=&#34;php-mongodb åŠ php-mongo å¯¹ PHP ç‰ˆæœ¬çš„æ”¯æŒ&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ ¹æ®æ¯”è¾ƒæƒ…å†µ php-mongodb æ˜¾ç„¶æ”¯æŒæ›´é«˜ç‰ˆæœ¬çš„ MongoDBï¼Œè€Œä¸”å…¶è¿˜æ”¯æŒ PHP7 åŠ HHVMï¼Œæ‰€ä»¥é€‰æ‹©å®‰è£… php-mongodb æ‰©å±•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew install php56-mongodb
==&amp;gt; Installing php56-mongodb from homebrew/php
==&amp;gt; Downloading https://homebrew.bintray.com/bottles-php/php56-mongodb-1.1.2.el_capitan.bottle.tar.gz
######################################################################## 100.0%
==&amp;gt; Pouring php56-mongodb-1.1.2.el_capitan.bottle.tar.gz
==&amp;gt; Caveats
To finish installing mongodb for PHP 5.6:
  * /usr/local/etc/php/5.6/conf.d/ext-mongodb.ini was created,
    do not forget to remove it upon extension removal.
  * Validate installation via one of the following methods:
  *
  * Using PHP from a webserver:
  * - Restart your webserver.
  * - Write a PHP page that calls &amp;quot;phpinfo();&amp;quot;
  * - Load it in a browser and look for the info on the mongodb module.
  * - If you see it, you have been successful!
  *
  * Using PHP from the command line:
  * - Run `php -i &amp;quot;(command-line &#39;phpinfo()&#39;)&amp;quot;`
  * - Look for the info on the mongodb module.
  * - If you see it, you have been successful!
==&amp;gt; Summary
ğŸº  /usr/local/Cellar/php56-mongodb/1.1.2: 5 files, 751.1K
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;mongodb-çš„-crub-æ“ä½œ:329d44cf14e5929d78d602751fb22339&#34;&gt;MongoDB çš„ CRUB æ“ä½œ&lt;/h4&gt;

&lt;p&gt;php-mongodb ä½¿ç”¨çš„ç®¡ç†å™¨æ–¹å¼å¤„ç†çš„ï¼Œåˆ†ç¦»ä¸ºå¤šä¸ªç±»æ–¹æ³•ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ’å…¥æ“ä½œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$bulk = new MongoDB\Driver\BulkWrite;


$bulk-&amp;gt;insert(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;1&amp;quot;));
$bulk-&amp;gt;insert(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;2&amp;quot;));
$bulk-&amp;gt;insert(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;3&amp;quot;));
$bulk-&amp;gt;insert(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;4&amp;quot;));
$bulk-&amp;gt;insert(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;5&amp;quot;));


$manager = new MongoDB\Driver\Manager(&amp;quot;mongodb://127.0.0.1:27017/&amp;quot;);
$writeConcern = new MongoDB\Driver\WriteConcern(MongoDB\Driver\WriteConcern::MAJORITY, 100);
$result = $manager-&amp;gt;executeBulkWrite(&#39;yangming.bpcoder&#39;, $bulk, $writeConcern);
echo &amp;quot;getInsertedCount: &amp;quot; . $result-&amp;gt;getInsertedCount();
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ›´æ–°æ“ä½œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$bulk = new MongoDB\Driver\BulkWrite;


$bulk-&amp;gt;update(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;1&amp;quot;), array(&#39;$set&#39; =&amp;gt; array(&amp;quot;color&amp;quot; =&amp;gt; &amp;quot;blue&amp;quot;)));
$bulk-&amp;gt;update(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;3&amp;quot;), array(&#39;$set&#39; =&amp;gt; array(&amp;quot;color&amp;quot; =&amp;gt; &amp;quot;red&amp;quot;)));
$bulk-&amp;gt;update(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;6&amp;quot;), array(&#39;$set&#39; =&amp;gt; array(&amp;quot;color&amp;quot; =&amp;gt; &amp;quot;orange&amp;quot;)), array(&amp;quot;multi&amp;quot; =&amp;gt; false, &amp;quot;upsert&amp;quot; =&amp;gt; true));


$manager = new MongoDB\Driver\Manager(&amp;quot;mongodb://127.0.0.1:27017/&amp;quot;);
$writeConcern = new MongoDB\Driver\WriteConcern(MongoDB\Driver\WriteConcern::MAJORITY, 100);
$result = $manager-&amp;gt;executeBulkWrite(&#39;yangming.bpcoder&#39;, $bulk, $writeConcern);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ é™¤æ“ä½œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$bulk = new MongoDB\Driver\BulkWrite;


$bulk-&amp;gt;delete(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;2&amp;quot;));
$bulk-&amp;gt;delete(array(&amp;quot;name&amp;quot; =&amp;gt; &amp;quot;4&amp;quot;));


$manager = new MongoDB\Driver\Manager(&amp;quot;mongodb://127.0.0.1:27017/&amp;quot;);
$writeConcern = new MongoDB\Driver\WriteConcern(MongoDB\Driver\WriteConcern::MAJORITY, 100);
$result = $manager-&amp;gt;executeBulkWrite(&#39;yangming.bpcoder&#39;, $bulk, $writeConcern);
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æŸ¥è¯¢æ“ä½œ&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$manager = new MongoDB\Driver\Manager(&amp;quot;mongodb://127.0.0.1:27017/&amp;quot;);
$filter = array(&amp;quot;name&amp;quot; =&amp;gt; array(&#39;$gt&#39; =&amp;gt; &amp;quot;1&amp;quot;));
$options = array();
$query = new MongoDB\Driver\Query($filter, $options);
$cursor = $manager-&amp;gt;executeQuery(&#39;yangming.bpcoder&#39;, $query);


foreach ($cursor as $document)
{
    print_r($document);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;æ€»ç»“:329d44cf14e5929d78d602751fb22339&#34;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;ç›¸å¯¹æ¥è¯´ï¼Œæ–°çš„ PHP çš„ MongoDB æ‰©å±•æ¯”åŸæœ‰çš„æ‰©å±•å¥½å¾ˆå¤šï¼Œä¹Ÿæ›´åŠ æ˜“ç”¨ï¼Œåªè¦æ ¹æ®ä¸ªäººçš„é¡¹ç›®å¼€å‘éœ€æ±‚è¿›è¡Œç›¸åº”çš„å°è£…å³å¯ï¼Œè€Œä¸”æ›´åŠ é¢å‘å¯¹è±¡è®¾è®¡ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>MongoDB å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link>http://oubnpdea.github.io/2016/03/mongodb-2/</link>
      <pubDate>Wed, 02 Mar 2016 07:00:00 +0800</pubDate>
      <author>345345345345@163.com (345345 345345345)</author>
      <guid>http://oubnpdea.github.io/2016/03/mongodb-2/</guid>
      <description>

&lt;p&gt;æ•´ç†å­¦ä¹ é€šè¿‡å¸¸è§ç¼–ç¨‹è¯­è¨€æ“ä½œä½¿ç”¨ MongoDBï¼Œå› ä¸ºé˜…è¯»çš„ä¹¦ç±å’Œèµ„æ–™å¤šä»¥ Ruby ä¸ºä¸»ï¼Œæ‰€ä»¥ä¸€å¹¶æ•´ç†å¹¶æ€»ç»“ä¸¤ç§ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨æ–¹å¼ï¼ˆRuby &amp;amp; PHPï¼‰ï¼Œæ•´ç† PHP ä¸»è¦åŸå› æ˜¯å› ä¸ºå·¥ä½œé¡¹ç›®ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ruby-ç¯‡:ea3507c75d66dd829edd9ad47c95a86d&#34;&gt;Ruby ç¯‡&lt;/h2&gt;

&lt;h4 id=&#34;å®‰è£…-mongodb-çš„-ruby-é©±åŠ¨:ea3507c75d66dd829edd9ad47c95a86d&#34;&gt;å®‰è£… MongoDB çš„ Ruby é©±åŠ¨&lt;/h4&gt;

&lt;p&gt;å› ä¸º Ruby æ‹¥æœ‰è‡ªå·±çš„åŒ…ç®¡ç†ç³»ç»Ÿ RubyGemsï¼Œæ•…ä½¿ç”¨å…¶å®‰è£…å³å¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ gem install mongo
Fetching: bson-4.0.3.gem (100%)
Building native extensions.  This could take a while...
Successfully installed bson-4.0.3
Fetching: mongo-2.2.3.gem (100%)
Successfully installed mongo-2.2.3
Parsing documentation for bson-4.0.3
Installing ri documentation for bson-4.0.3
Parsing documentation for mongo-2.2.3
Installing ri documentation for mongo-2.2.3
Done installing documentation for bson, mongo after 4 seconds
2 gems installed
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;é€šè¿‡å®‰è£…æµç¨‹å¯ä»¥çœ‹å‡ºå®‰è£…ä¸¤éƒ¨åˆ† bson-4.0.3.gem åŠ mongo-2.2.3.gemï¼ˆå®é™…æƒ…å†µå¯èƒ½å®‰è£…ç‰ˆæœ¬å·æœ‰å‡ºè·¯ï¼‰ï¼Œå…¶ä¸­ BSON æ˜¯å— JSON å¯å‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼ŒMongoDB ç”¨ä»–æ¥è¡¨ç¤ºæ–‡æ¡£ã€‚è€Œ bson-4.0.3.gem æ˜¯ç”¨æ¥å°† Ruby å¯¹è±¡åºåˆ—åŒ–ä¸º BSON æˆ–è€…å°† BSON ååºåˆ—åŒ–ä¸º Ruby å¯¹è±¡çš„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;è¿æ¥-mongodb-æ ·ä¾‹:ea3507c75d66dd829edd9ad47c95a86d&#34;&gt;è¿æ¥ MongoDB æ ·ä¾‹&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;require &#39;mongo&#39;

#client = Mongo::Client.new([ &#39;127.0.0.1:27017&#39; ], :database =&amp;gt; &#39;tutorial&#39;)
client = Mongo::Client.new(&#39;mongodb://127.0.0.1:27017/tutorial&#39;)

è¾“å‡ºDebugç»“æœï¼š
D, [2016-03-01T12:40:20.613274 #27736] DEBUG -- : MONGODB | Adding 127.0.0.1:27017 to the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä»£ç å¾ˆç®€å•ï¼Œä¸¤ç§è¿æ¥æ–¹å¼å‡å¯ï¼Œå¦‚æœä½ å¼€å¯äº† DEBUG æ¨¡å¼ï¼Œè¿è¡Œä¸€ä¸‹å°±å¯ä»¥çœ‹åˆ°è¿è¡Œæƒ…å†µã€‚&lt;/p&gt;

&lt;h4 id=&#34;åŸºæœ¬çš„-crud-æ“ä½œæ ·ä¾‹:ea3507c75d66dd829edd9ad47c95a86d&#34;&gt;åŸºæœ¬çš„ CRUD æ“ä½œæ ·ä¾‹&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ’å…¥æ“ä½œï¼šinsert_one | insert_many&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;result = client[:users].insert_one({&#39;username&#39;: &#39;Ming Yang&#39;}) 


è¾“å‡ºDebugç»“æœï¼š
D, [2016-03-01T12:45:52.390855 #27778] DEBUG -- : MONGODB | Adding 127.0.0.1:27017 to the cluster.
D, [2016-03-01T12:45:52.392778 #27778] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.insert | STARTED | {&amp;quot;insert&amp;quot;=&amp;gt;&amp;quot;users&amp;quot;, &amp;quot;documents&amp;quot;=&amp;gt;[{:username=&amp;gt;&amp;quot;Ming Yang&amp;quot;, :_id=&amp;gt;BSON::ObjectId(&#39;56d51e807ae7216c8236bcde&#39;)}], &amp;quot;ordered&amp;quot;=&amp;gt;true}
D, [2016-03-01T12:45:52.393603 #27778] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.insert | SUCCEEDED | 0.000754s


result = client[:users].insert_many([{&#39;username&#39;: &#39;robot0&#39;},{&#39;username&#39;: &#39;robot1&#39;},{&#39;username&#39;: &#39;robot2&#39;}])


è¾“å‡ºDebugç»“æœï¼š
D, [2016-03-01T12:46:56.891338 #27803] DEBUG -- : MONGODB | Adding 127.0.0.1:27017 to the cluster.
D, [2016-03-01T12:46:56.893884 #27803] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.insert | STARTED | {&amp;quot;insert&amp;quot;=&amp;gt;&amp;quot;users&amp;quot;, &amp;quot;documents&amp;quot;=&amp;gt;[{:username=&amp;gt;&amp;quot;robot0&amp;quot;, :_id=&amp;gt;BSON::ObjectId(&#39;56d51ec07ae7216c9b4f2a66&#39;)}, {:username=&amp;gt;&amp;quot;robot1&amp;quot;, :_id=&amp;gt;BSON::ObjectId(&#39;56d51ec07ae7216c9b4f2a67&#39;)}, {:username=&amp;gt;&amp;quot;robot2&amp;quot;, :_id=&amp;gt;BSON::ObjectId(&#39;56d51ec07ae7216c9b4f2a68&#39;)}...
D, [2016-03-01T12:46:56.894697 #27803] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.insert | SUCCEEDED | 0.000741s
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æŸ¥è¯¢æ“ä½œï¼šfind&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;client[:users].find({&#39;username&#39;: &#39;Yang&#39;}).each do |doc|
    puts doc
end


è¾“å‡ºDebugç»“æœï¼š
D, [2016-03-01T13:50:57.343763 #28019] DEBUG -- : MONGODB | Adding 127.0.0.1:27017 to the cluster.
D, [2016-03-01T13:50:57.345945 #28019] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.find | STARTED | {&amp;quot;find&amp;quot;=&amp;gt;&amp;quot;users&amp;quot;, &amp;quot;filter&amp;quot;=&amp;gt;{&amp;quot;username&amp;quot;=&amp;gt;&amp;quot;Yang&amp;quot;}}
D, [2016-03-01T13:50:57.346787 #28019] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.find | SUCCEEDED | 0.0007689999999999999s
{&amp;quot;_id&amp;quot;=&amp;gt;BSON::ObjectId(&#39;56d3f2cdc78712267ac63daf&#39;), &amp;quot;username&amp;quot;=&amp;gt;&amp;quot;Yang&amp;quot;, &amp;quot;country&amp;quot;=&amp;gt;&amp;quot;China&amp;quot;}


puts client[:users].find({&#39;username&#39;: &#39;Yang&#39;}).count


è¾“å‡ºç»“æœï¼š
1


client[:users].find.distinct(:username).each do |doc|
    puts doc
end


è¾“å‡ºç»“æœï¼š
BPCoder
Yang
robot0
robot1
robot2
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;æ›´æ–°æ“ä½œï¼šupdate_one | update_many | replace_one | find_one_and_update | find_one_and_replace&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;client[:users].find({&#39;username&#39;: &#39;robot0&#39;}).update_one({&#39;country&#39;: &#39;China&#39;})


è¾“å‡ºDebugç»“æœï¼š
D, [2016-03-01T14:07:04.920829 #28221] DEBUG -- : MONGODB | Adding 127.0.0.1:27017 to the cluster.
D, [2016-03-01T14:07:04.923163 #28221] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.update | STARTED | {&amp;quot;update&amp;quot;=&amp;gt;&amp;quot;users&amp;quot;, &amp;quot;updates&amp;quot;=&amp;gt;[{&amp;quot;q&amp;quot;=&amp;gt;{&amp;quot;username&amp;quot;=&amp;gt;&amp;quot;robot0&amp;quot;}, &amp;quot;u&amp;quot;=&amp;gt;{:country=&amp;gt;&amp;quot;China&amp;quot;}, &amp;quot;multi&amp;quot;=&amp;gt;false, &amp;quot;upsert&amp;quot;=&amp;gt;false}], &amp;quot;ordered&amp;quot;=&amp;gt;true}
D, [2016-03-01T14:07:04.924070 #28221] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.update | SUCCEEDED | 0.000846s


client[:users].find({&#39;username&#39;: &#39;robot0&#39;}).update_many({&#39;country&#39;: &#39;China&#39;})
client[:users].find({&#39;username&#39;: &#39;Yang&#39;}).replace_one({&amp;quot;$set&amp;quot;: {&#39;city&#39;: &#39;Shenyang&#39;}})
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;åˆ é™¤æ“ä½œï¼šdelete_one | delete_many&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;client[:users].find({&#39;username&#39;: &#39;robot0&#39;}).delete_one


è¾“å‡ºDebugç»“æœï¼š
D, [2016-03-01T15:17:27.455187 #28994] DEBUG -- : MONGODB | Adding 127.0.0.1:27017 to the cluster.
D, [2016-03-01T15:17:27.457425 #28994] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.delete | STARTED | {&amp;quot;delete&amp;quot;=&amp;gt;&amp;quot;users&amp;quot;, &amp;quot;deletes&amp;quot;=&amp;gt;[{&amp;quot;q&amp;quot;=&amp;gt;{&amp;quot;city&amp;quot;=&amp;gt;&amp;quot;Shenyang&amp;quot;}, &amp;quot;limit&amp;quot;=&amp;gt;1}], &amp;quot;ordered&amp;quot;=&amp;gt;true}
D, [2016-03-01T15:17:27.458301 #28994] DEBUG -- : MONGODB | 127.0.0.1:27017 | tutorial.delete | SUCCEEDED | 0.000799s


client[:users].find({&#39;username&#39;: &#39;robot0&#39;}).delete_many
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>åˆè¯† MongoDB</title>
      <link>http://oubnpdea.github.io/2016/03/mongodb-1/</link>
      <pubDate>Tue, 01 Mar 2016 07:00:00 +0800</pubDate>
      <author>345345345345@163.com (345345 345345345)</author>
      <guid>http://oubnpdea.github.io/2016/03/mongodb-1/</guid>
      <description>

&lt;p&gt;ä¹‹å‰å¯¹äº MongoDB çš„äº†è§£æ¯”è¾ƒæ³›æ³›ï¼Œä¹Ÿæ˜¯å› ä¸ºåœ¨å·¥ä½œä¸­ä½¿ç”¨çš„æ¯”è¾ƒå°‘çš„ç¼˜æ•…ï¼Œå¥½å§å°±æ˜¯æ²¡ç”¨è¿‡ã€‚ã€‚ã€‚æœ€è¿‘å·¥ä½œä¸Šæ–°é¡¹ç›®ä½¿ç”¨çš„ä¸»è¦æ•°æ®åº“ä¸º MongoDBï¼Œé‚£ä¹ˆæ­£å¥½ç³»ç»Ÿçš„äº†è§£å­¦ä¹ ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;ç®€ä»‹:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;ç®€ä»‹&lt;/h3&gt;

&lt;p&gt;MongoDB æ˜¯ä¸€æ¬¾ä¸º Web åº”ç”¨ç¨‹åºå’Œäº’è”ç½‘åŸºç¡€è®¾æ–½è®¾è®¡çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚MongoDB çš„æ•°æ®æ¨¡å‹å’ŒæŒä¹…åŒ–ç­–ç•¥çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›é«˜è¯»å†™ååé‡ï¼Œåœ¨æ˜“äºä¼¸ç¼©åŒæ—¶è¿˜èƒ½è¿›è¡Œè‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚&lt;/p&gt;

&lt;p&gt;MongoDB çš„ä¸»è¦ç‰¹æ€§ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ–‡æ¡£æ•°æ®æ¨¡å‹&lt;/li&gt;
&lt;li&gt;å³æ—¶æŸ¥è¯¢ï¼ˆæ— éœ€é¢„å…ˆå®šä¹‰ç³»ç»Ÿæ¥å—çš„æŸ¥è¯¢ç±»å‹ï¼‰&lt;/li&gt;
&lt;li&gt;äºŒçº§ç´¢å¼•ï¼ˆBæ ‘ï¼‰&lt;/li&gt;
&lt;li&gt;å¤‡ä»½å¤åˆ¶&lt;/li&gt;
&lt;li&gt;é€Ÿåº¦ä¸æŒä¹…æ€§&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“æ‰©å±•&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;MongoDB ä¸å…¶ä»–ä¸»æµæ•°æ®åº“çš„å¯¹æ¯”ï¼ˆå›¾ç‰‡æ¥è‡ªã€ŠMongoDB å®æˆ˜ã€‹ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://7xp22y.com1.z0.glb.clouddn.com/mongodb-1-1.jpg&#34; alt=&#34;MongoDB ä¸å…¶ä»–ä¸»æµæ•°æ®åº“çš„å¯¹æ¯”&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;ä½¿ç”¨åœºæ™¯:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;ä½¿ç”¨åœºæ™¯&lt;/h3&gt;

&lt;p&gt;å¯¹äºä»»ä½•è½¯ä»¶æ¥è¯´ï¼Œå®ƒçš„ä½¿ç”¨åœºæ™¯å¾€å¾€æ‰æ˜¯æŠ€æœ¯é€‰å‹æ—¶æœ€ä¸ºå…³æ³¨çš„ï¼Œè€Œ MongoDB ç”±äºå…¶å…·å¤‡çš„ç‰¹æ€§ï¼Œé€‚ç”¨çš„åœºæ™¯å¾ˆå¤šï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Web åº”ç”¨ç¨‹åº&lt;/li&gt;
&lt;li&gt;æ•æ·å¼€å‘&lt;/li&gt;
&lt;li&gt;åˆ†æå’Œæ—¥å¿—&lt;/li&gt;
&lt;li&gt;ç¼“å­˜&lt;/li&gt;
&lt;li&gt;å¯å˜çš„Schema&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;å®‰è£…:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;å®‰è£…&lt;/h3&gt;

&lt;p&gt;å…ˆåˆ›å»ºæ•°æ®ç›®å½•&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo mkdir -p /data/db
$ sudo chown `id -u` /data/db
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿˜æ˜¯è€æ ·å­ä»¥ Mac ä¸ºä¾‹å®‰è£…ï¼Œç®€å•çš„ä¸è¡Œï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ brew install mongodb
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¶åå…¨ç¨‹è‡ªåŠ¨åŒ–ï¼Œç„¶åå°±å®‰å¥½äº†ã€‚æœ€åå¯¹ /usr/local/etc/mongod.conf æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œæ³¨é‡Šæ‰åŸé»˜è®¤ä¿¡æ¯ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;dbpath=/data/db
logpath=/usr/local/var/log/mongodb/mongo.log
rest=true
fork=true
port=27017
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è¿™æ ·å°±å®‰è£…å®Œæˆäº†ï¼Œå…¶ä¸­ MongoDB å³å¯ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ mongod -f /usr/local/etc/mongod.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;åŸºæœ¬çš„-crud-æ“ä½œ:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;åŸºæœ¬çš„ CRUD æ“ä½œ&lt;/h3&gt;

&lt;p&gt;MongoDB ä¹Ÿæä¾›äº†ä¸€ä¸ªç±»ä¼¼äº MySQL Client ä¸€æ ·çš„ Shellï¼Œä¸è¿‡æ˜¯ä¸€ä¸ª JavaScript Shellï¼Œåªè¦å¯¹äº JS åŸºæœ¬è¯­æ³•äº†è§£ä½¿ç”¨èµ·æ¥å¾ˆå®¹æ˜“ã€‚&lt;/p&gt;

&lt;p&gt;åˆ‡æ¢æ•°æ®åº“å‘½ä»¤å’Œ MySQL å®Œå…¨ä¸€è‡´ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; use tutorial
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ³¨ï¼šMongoDB æ•°æ®åº“å’Œé›†åˆä¸éœ€è¦æ˜¾ç¤ºåˆ›å»ºï¼Œå‡éƒ½æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ’å…¥æ–‡æ¡£æ—¶æ‰ä¼šè¢«åˆ›å»ºã€‚&lt;/p&gt;

&lt;h5 id=&#34;æ’å…¥æ“ä½œ:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;æ’å…¥æ“ä½œ&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; db.users.insert({&amp;quot;username&amp;quot;: &amp;quot;BPCoder&amp;quot;})     // æ’å…¥ä¸€æ¡æ–‡æ¡£
&amp;gt; db.users.save({&amp;quot;username&amp;quot;: &amp;quot;Yang&amp;quot;})          // å¦‚æœ _id å­˜åœ¨ä¸ºæ›´æ–°ï¼Œå¦‚æœ _id ä¸å­˜åœ¨ä¸ºæ’å…¥
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;åˆ é™¤æ“ä½œ:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;åˆ é™¤æ“ä½œ&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; db.users.remove({&amp;quot;username&amp;quot;: &amp;quot;Yang&amp;quot;})        // æ ¹æ®æ¡ä»¶åˆ é™¤
&amp;gt; db.users.drop()                              // åˆ é™¤é›†åˆä»¥åŠå®ƒçš„å…¨éƒ¨ç´¢å¼•
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;æŸ¥è¯¢æ“ä½œ:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;æŸ¥è¯¢æ“ä½œ&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; db.users.find()                                   // æŸ¥è¯¢å…¨éƒ¨
&amp;gt; db.users.count()                                  // æŸ¥è¯¢æ€»æ¡æ•°
&amp;gt; db.users.find({&amp;quot;username&amp;quot;: &amp;quot;Yang&amp;quot;})               // æ ¹æ®æ¡ä»¶æŸ¥è¯¢
&amp;gt; db.users.find({&amp;quot;favorites.citys&amp;quot;: &amp;quot;Shenyang&amp;quot;})    // å¤æ‚ç»“æ„åŒ¹é…æŸ¥è¯¢
&amp;gt; db.numbers.find({&amp;quot;num&amp;quot;: {&amp;quot;$gt&amp;quot;: 20, &amp;quot;$lt&amp;quot;: 26}})     // æ¡ä»¶æŸ¥è¯¢æ–¹å¼ï¼ˆ$lt å°äº &amp;amp; $gt å¤§äºï¼‰
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;æ›´æ–°æ“ä½œ:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;æ›´æ–°æ“ä½œ&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; db.users.update({&amp;quot;username&amp;quot;: &amp;quot;Yang&amp;quot;}, {$set: {&amp;quot;country&amp;quot;: &amp;quot;China&amp;quot;}}, false, true)   // æ·»åŠ ä¸€ä¸ªæ–°çš„ country å±æ€§ï¼ˆæœ€åä¸€ä¸ªå‚æ•°å¼€å¯å¤šé¡¹æ›´æ–°ï¼‰
&amp;gt; db.users.update({&amp;quot;username&amp;quot;: &amp;quot;Yang&amp;quot;}, {$unset: {&amp;quot;country&amp;quot;: 1}})       // åˆ é™¤ä¸€ä¸ª country å±æ€§
&amp;gt; db.users.update({&amp;quot;username&amp;quot;: &amp;quot;BPCoder&amp;quot;}, {$set: {&amp;quot;favorites&amp;quot;:  {&amp;quot;citys&amp;quot;: [&amp;quot;Shenyang&amp;quot;, &amp;quot;Dalian&amp;quot;], &amp;quot;movies&amp;quot;: [&amp;quot;å«Œç–‘äºº X çš„çŒ®èº«&amp;quot;]}}})  // å¤æ‚ç»“æ„
&amp;gt; db.users.update({&amp;quot;username&amp;quot;: &amp;quot;BPCoder&amp;quot;}, {$push: {&amp;quot;favorites.citys&amp;quot;: &amp;quot;Tianjing&amp;quot;}}) // å•ç‹¬æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆä¸ä¿è¯å”¯ä¸€æ€§ï¼‰
&amp;gt; db.users.update({&amp;quot;username&amp;quot;: &amp;quot;BPCoder&amp;quot;}, {$addToSet: {&amp;quot;favorites.citys&amp;quot;: &amp;quot;Tianjing&amp;quot;}}) // å•ç‹¬æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆä¿è¯å”¯ä¸€æ€§ï¼‰
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;è®¾ç½®ç´¢å¼•:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;è®¾ç½®ç´¢å¼•&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; db.numbers.ensureIndex({&amp;quot;num&amp;quot;: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;è·å–è¯¥é›†åˆå·²ç»è®¾ç½®ç´¢å¼•ä¿¡æ¯:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;è·å–è¯¥é›†åˆå·²ç»è®¾ç½®ç´¢å¼•ä¿¡æ¯&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; db.numbers.getIndexes()
&lt;/code&gt;&lt;/pre&gt;

&lt;h5 id=&#34;åŸºæœ¬ç®¡ç†å‘½ä»¤:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;åŸºæœ¬ç®¡ç†å‘½ä»¤&lt;/h5&gt;

&lt;pre&gt;&lt;code&gt;&amp;gt; show dbs              // è·å–æ•°æ®åº“ä¿¡æ¯
&amp;gt; db.stats()            // è·å–æ•°æ®åº“æˆ–è€…é›†åˆæ›´åº•å±‚çš„ä¿¡æ¯ ï¼ˆdb.users.stats()ï¼‰
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;æ€»ç»“:e442ee6fc7fb3e7c045e584ae1a72e13&#34;&gt;æ€»ç»“&lt;/h3&gt;

&lt;p&gt;ç®€å•æ•´ç†å¯¹äº MongoDB çš„å®‰è£…åŠåŸºæœ¬æ“ä½œï¼Œåç»­ä¼šåœ¨æ·±å…¥äº†è§£åè¡¥å……åšå®¢ï¼Œé‚£å°±åˆ°è¿™äº†ã€‚ã€‚ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>